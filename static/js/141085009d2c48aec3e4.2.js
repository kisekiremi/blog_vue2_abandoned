(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/UFO":function(e,t,r){"use strict";r.r(t);var i=r("WIBD"),o=r("yyRi"),n=r("xGzH");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={components:{TokenDialog:o.a},data:function(){return{form:{title:"",description:"",content:""},ruleValidate:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{type:"string",max:32,message:"标题长度不大于32字符",trigger:"change"}],description:[{required:!0,message:"请输入博客描述",trigger:"blur"}],content:[{required:!0,message:"请输博客入正文",trigger:"blur"}]},submitButton:{loading:!1,disabled:!1},mavonEditorToolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,readmodel:!0,htmlcode:!0,trash:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},Object(i.mapGetters)(["token"])),mounted:function(){var e=this;this.token||this.$nextTick(function(){e.$message({message:"权限不足",type:"error"}),e.$router.go(-1)})},methods:{imgAdd:function(e,t){this.$refs.md.$img2Url(e,t.miniurl)},onSubmit:function(){var e=this;this.token?this.publish():this.$refs.tokenDialog.open(function(){e.publish()})},publish:function(){var r=this;this.$refs.form.validate(function(e){e&&(r.submitButton.loading=!0,r.submitButton.disabled=!0,n.a.create(r.form).then(function(e){var t=e.data;r.$message({message:"发表成功",type:"success"}),r.$router.push("/archives/create/detail/"+t.id)}).then(function(){r.submitButton.loading=!1,r.submitButton.disabled=!1}))})}}},u=r("JFUb"),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"AddTop"}},[r("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"never"}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.ruleValidate}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"简要说明",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"博客正文",prop:"content"}},[r("mavon-editor",{ref:"md",attrs:{subfield:!1,toolbars:t.mavonEditorToolbars},on:{imgAdd:t.imgAdd},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:t.submitButton.loading,disabled:t.submitButton.disabled},on:{click:t.onSubmit}},[t._v("发表")]),t._v(" "),r("el-button",{on:{click:function(e){return t.$router.push("/archives/create")}}},[t._v("返回")])],1)],1)],1),t._v(" "),r("token-dialog",{ref:"tokenDialog"})],1)},[],!1,null,null,null);t.default=c.exports}}]);